<div class="md-whiteframe-4dp" layout-padding ng-controller="DashboardController as vm">
  <br />

  <!-- add new task form -->
  <form name="newTaskForm" ng-submit="vm.addTask(vm.newTask)" autocomplete="off">
    <md-content id="newTaskBar" layout-gt-sm="row" layout-align="center center">
      <md-input-container flex="60">
        <label>Opis zadania</label>
        <input type="text" name="desc" ng-model="vm.newTask.desc" required md-no-asterisk autocomplete="off">
        <div ng-messages="newTaskForm.desc.$error" role="alert">
            <div ng-message="required">Pole nie może być puste.</div>
        </div>
      </md-input-container>

      <!-- <md-input-container flex="30"> -->
        <!-- <label>Kategoria</label> -->
        <!-- <input type="text" name="category" ng-model="vm.newTask.category" required md-no-asterisk autocomplete="off"> -->
        <!-- autocomplete -->
        <div ng-controller="autocompleteController as ctrl">
          <md-autocomplete
              ng-disabled="ctrl.isDisabled"
              md-no-cache="ctrl.coCache"
              md-selected-item="ctrl.selectedItem"
              md-search-text-change="ctrl.searchTextChange(ctrl.searchText)"
              md-search-text="ctrl.searchText"
              md-selected-item-change="ctrl.selectedItemChange(item)"
              md-items="item in ctrl.querySearch(ctrl.searchText)"
              md-item-text="item.display"
              md-min-length="0"
              placeholder="Kategoria..">

              <md-item-template>
                <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span>
              </md-item-template>
              <md-not-found>
                Nie znaleziono: "{{ctrl.searchText}}".
                <a ng-click="ctrl.newState(ctrl.searchText)">Create a new one!</a>
              </md-not-found>
          </md-autocomplete>
        </div>

      <!-- </md-input-container> -->

      <md-input-container>
        <md-button type="submit" class="md-fab" aria-label="add-task" >
              <md-icon><i class="material-icons">add</i></md-icon>
          </md-button>
      </md-input-container>
    </md-content>

  </form>

  <br />

<!-- Table menu -->
<div layout layout-align="end" flex="90">
  <md-button class="md-icon-button md-hue-1" ng-click="vm.removeTasks()"><md-icon><i class="material-icons" id="delete_icon">delete</i></md-icon> </md-button>
</div>

<!-- Tasks table -->
<table  cellspacing="0" width="100%" layout-padding>
  <thead>
    <tr>
      <th >
        <md-checkbox> </md-checkbox>
      </th>
      <th>Opis</th>
      <th>Kategoria</th>
      <th>Data utworzenia</th>
      <th>Data modyfikacji</th>
      <th>Czas trwania</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="item in vm.tasks">
      <td>
        <md-checkbox ng-model="item.selected" aria-label="checkbox_{{item._id}}"> </md-checkbox>
      </td>
      <td>{{ item.desc }}</td>
      <td>{{ item.category }}</td>
      <td>{{ item.creationDate | date:'yyyy-MM-dd HH:mm:ss'}}</td>
      <td>{{ item.updated | date:'yyyy-MM-dd HH:mm:ss' }}</td>
      <td>{{ item.duration | formatDuration }}</td>
      <td>
        <md-button type="button" ng-if="!item.isPerforming" class="md-raised md-primary"
         style="background-color:#4CAF50" ng-click="vm.toggleTask(item)">START</md-button>
        <md-button type="button" ng-if="item.isPerforming" class="md-raised md-primary"
         style="background-color:#F44336" ng-click="vm.toggleTask(item)">STOP</md-button>
      </td>
    </tr>
  </tbody>
</table>

</div>
